<div class="row">
  <div class="col-12 col-md-12">
    <mat-card>
      <mat-card-header>
        <mat-card-title><h3>Appointments</h3></mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="row">
          <div class="col-6 col-md-6 text-start">
            <p>Manage your appointments.</p>
          </div>
          <div class="col-6 col-md-6 text-end">
            <button class="btn btn-primary float-end" (click)="addEvent()"> Add new </button>
          </div>
        </div>

        <div class="table-responsive">
          <table class="table table-bordered">
            <thead>
              <tr>
                <th>Title</th>
                <th>Primary color</th>
                <th>Secondary + text color</th>
                <th>Starts at</th>
                <th>Ends at</th>
                <th>Remove</th>
              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let event of userEvents; let i = index">
                <td>
                  <input type="text" class="form-control" [(ngModel)]="event.title" (keyup)="refresh.next()" />
                </td>
                <td>
                  <input type="color" *ngIf="event.color" [(ngModel)]="event.color.primary" (change)="refresh.next()" />
                </td>
                <td>
                  <input type="color" *ngIf="event.color" [(ngModel)]="event.color.secondary"
                    (change)="refresh.next()" />
                  <input type="color" *ngIf="event.color" [ngModel]="event.color.secondaryText ?? '#1e90ff'"
                    (ngModelChange)="event.color.secondaryText = $event" (change)="refresh.next()" />
                </td>
                <td>
                  <input class="form-control" type="text" mwlFlatpickr [(ngModel)]="event.start"
                    (ngModelChange)="refresh.next()" dateFormat="Y-m-dTH:i" altFormat="F j, Y H:i"
                    placeholder="Not set" />
                </td>
                <td>
                  <input class="form-control" type="text" mwlFlatpickr [(ngModel)]="event.end"
                    (ngModelChange)="refresh.next()" dateFormat="Y-m-dTH:i" altFormat="F j, Y H:i"
                    placeholder="Not set" />
                </td>
                <td>
                  <button class="btn btn-danger" (click)="deleteEvent(event)">
                    Delete
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>